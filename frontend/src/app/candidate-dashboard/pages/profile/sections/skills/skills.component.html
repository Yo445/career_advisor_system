<!-- Link to Bootstrap 5 CSS is placed here for simplicity, although typically in index.html -->

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

<div class="d-flex flex-column align-items-center p-5" style="background-color: #f8f9fa;">
<!-- Main Content Card -->
<div class="card p-4 rounded-1 shadow-sm mb-4" style="width:80%">

    <!-- Header Text -->
    <p class="fw-semibold text-dark mb-4">
        What skills, tools, technologies and fields of expertise do you have?
        <span class="text-secondary fw-normal">- Add up to 20</span>
    </p>

    <!-- Current Skills Display (Skill badges) -->
    @if (skills().length > 0) {
        <div class="mb-4 d-flex flex-wrap gap-2">
            @for (skill of skills(); track skill) {
                <span class="badge rounded-pill skill-badge d-flex align-items-center">
                    {{ skill }}
                    <button (click)="removeSkill(skill)" class="btn-close ms-2" type="button" aria-label="Remove skill"></button>
                </span>
            }
        </div>
    }

    <!-- Add Skill Button with Custom Purple Style -->
    <button (click)="openModal()" class="btn main-btn" type="button" style="width:20%">
        + Add Skill
    </button>
</div>

<!-- The Modal -->
<div
    class="modal"
    [class.show-modal]="isModalOpen()"
>
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content p-4 rounded-4 shadow-lg border position-relative">

            <!-- Close Button -->
            <button (click)="closeModal()" class="btn-close position-absolute top-0 end-0 m-3" type="button"></button>

            <h2 class="h4 fw-semibold text-dark">Add Skill</h2>
            <hr>

            <div class="mb-3">
                <label for="skill-name-input" class="form-label text-dark fw-semibold">Skill Name <span class="text-danger">*</span></label>
                <!-- Uses Angular's two-way binding [(ngModel)] -->
                <input type="text" id="skill-name-input" [(ngModel)]="skillNameInput" class="form-control rounded-3" placeholder="e.g., Digital Marketing">

                <!-- Suggestions -->
                <div class="mt-2 form-text text-secondary">Suggestions:</div>
                <div class="d-flex flex-wrap gap-2 mt-2">
                    @for (suggestion of skillSuggestions; track suggestion) {
                        <button (click)="selectSuggestion(suggestion)" class="btn btn-sm btn-outline-secondary rounded-pill" type="button">
                            {{ suggestion }}
                        </button>
                    }
                </div>
            </div>

            <div class="mb-3">
                <label for="years-experience-input" class="form-label text-dark fw-semibold">Years of experience <span class="text-danger">*</span></label>
                <select id="years-experience-input" [(ngModel)]="yearsExperienceInput" class="form-select rounded-3">
                    <option value="">Select...</option>
                    <option value="0-1">0-1 year</option>
                    <option value="1-3">1-3 years</option>
                    <option value="3-5">3-5 years</option>
                    <option value="5+">5+ years</option>
                </select>
            </div>

            <!-- Error/Success Message -->
            @if (modalMessage()) {
                <div
                    class="mt-3 py-2 px-3 rounded-3 text-center"
                    [ngClass]="{'bg-danger text-light': hasError(), 'bg-success text-light': !hasError()}"
                >
                    {{ modalMessage() }}
                </div>
            }

            <div class="d-flex flex-row-reverse gap-2 mt-4">
                <button (click)="saveSkill()" class="btn main-btn shadow-sm custom-btn-purple" type="button">
                    Save
                </button>
                <button (click)="closeModal()" class="btn btn-secondary shadow-sm" type="button">
                    Cancel
                </button>
            </div>
        </div>
    </div>
</div>



<div class="card p-4 rounded-1 shadow-sm" style="width:80%">

    <!-- Header Text -->
    <p class="fw-semibold text-dark mb-4">
        What languages do you know?
        <span class="text-secondary fw-normal">- You can add more than one</span>
    </p>

    <!-- Current Languages Display -->
    @if (languages().length > 0) {
        <div class="mb-4 d-flex flex-wrap gap-2">
            @for (lang of languages(); track lang.name) {
                <span class="badge rounded-pill skill-badge d-flex align-items-center">
                    {{ lang.name }} ({{ lang.proficiency }})
                    <button (click)="removeLanguage(lang)" class="btn-close ms-2" type="button" aria-label="Remove language"></button>
                </span>
            }
        </div>
    }

    <!-- Add Language Button -->
    <button (click)="openLanguageModal()" class="btn main-btn" type="button" style="width:20%">
        + Add Language
    </button>
</div>

<div
class="modal"
[class.show-modal]="isLanguageModalOpen()"
>
<div class="modal-dialog modal-dialog-centered">
<div class="modal-content p-4 rounded-4 shadow-lg border position-relative">

        <!-- Close Button -->
        <button (click)="closeLanguageModal()" class="btn-close position-absolute top-0 end-0 m-3" type="button"></button>

        <h2 class="h4 fw-semibold text-dark ">Add Language</h2>
        <hr>

        <div class="mb-4">
            <label for="language-select" class="form-label text-dark fw-bold visually-hidden">Select Language</label>
            <select id="language-select" [(ngModel)]="languageNameInput" class="form-select rounded-3">
                <option value="">Select Language</option>
                <option value="English">English</option>
                <option value="Spanish">Spanish</option>
                <option value="French">French</option>
                <option value="German">German</option>
            </select>
        </div>

        <!-- Proficiency Radio Buttons -->
        <div class="mb-4">
            <label class="form-label text-dark fw-bold d-block mb-2 visually-hidden">Proficiency Level</label>
            <div class="btn-group w-100" role="group">
                @for (level of proficiencyLevels; track level) {
                    <input
                        type="radio"
                        class="btn-check"
                        name="proficiency"
                        [id]="'lang-' + level"
                        [value]="level"
                        [(ngModel)]="languageProficiencyInput"
                        autocomplete="off"
                    >
                    <label class="btn btn-outline-secondary" [for]="'lang-' + level">{{ level }}</label>
                }
            </div>
        </div>

        <!-- Error/Success Message -->
        @if (languageModalMessage()) {
            <div
                class="mt-3 py-2 px-3 rounded-3 text-center"
                [ngClass]="{'bg-danger text-light': hasLanguageError(), 'bg-success text-light': !hasLanguageError()}"
            >
                {{ languageModalMessage() }}
            </div>
        }

        <div class="d-flex justify-content-end mt-4">
            <button (click)="saveLanguage()" class="btn main-btn shadow-sm custom-btn-purple" type="button">
                Add
            </button>
        </div>
    </div>
</div>

</div>

</div>
